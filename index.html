<!doctype html>
<html lang="en-us">

<head>
	<meta charset="UTF-8">
	<title>Food Mood | Team Jarvis -  Darrin Davis, Ethan Rogers, Jaclyn Pajor, Donna England </title>

	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

	<!-- External Asset Stylesheets -->
	<!-- <link rel="stylesheet" type="text/css" href="assets/css/reset.css"> -->
	<!-- <link rel="stylesheet" type="text/css" href="assets/css/style.css"> -->

	<!-- jQuery 1.x -->
	<script
	  src="https://code.jquery.com/jquery-1.12.4.js"
	  integrity="sha256-Qw82+bXyGq6MydymqBxNPYTaUXXq7c8v3CwiYwLLNXU="
	  crossorigin="anonymous">
	</script>

	<!-- Latest compiled and minified JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous">
	</script>

	<!-- AJAX -->
	<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script> -->

    <!-- Firebase JavaScript Link -->
   <!--  <script src="https://www.gstatic.com/firebasejs/live/3.0/firebase.js"></script> -->

	<!-- Added Moment JS -->
	<!-- <script src="https://cdn.jsdelivr.net/momentjs/2.12.0/moment.min.js"></script> -->

</head>


<body>
<div class="camera">
    <video id="video"></video>
    <button id="start-camera"> Use this Photo </button>
    <input type="file" accept="image/*;capture=camera">
</div>
<div>
	<video autoplay></video>
	<canvas id="canvas" width="640" height="360"></canvas>
</div>
<!-- The <a> tag defines a hyperlink, which is used to link from one page to another.  The most important attribute of the <a> element is the href attribute, which indicates the link's destination.-->

<a id="dl-btn" href="canvas" download="mySelfie.png"> Save Photo </a>


<script type="text/javascript">

window.onload = function() {
  var startPos;
  navigator.geolocation.getCurrentPosition(function(position) {
  	console.log(position);
    // same as above
  }, function(error) {
    alert('Error occurred. Error code: ' + error.code);
    // error.code can be:
    //   0: unknown error
    //   1: permission denied
    //   2: position unavailable (error response from locaton provider)
    //   3: timed out
  });
};

// define constraints, audio, video or both
var constraints = {
  video: {
    mandatory: {
      maxWidth: 640,
      maxHeight: 360
    }
  }
};

// MediaDevices.getUserMedia()  With the user's permission through a prompt, turns on a camera or screensharing and/or a microphone on the system and provides a MediaStream containing a video track and/or an audio track with the input.
navigator.mediaDevices.getUserMedia(constraints)

.then(function(stream) {
        video.srcObject = stream;
        video.play();
    })
    .catch(function(err) {
        console.log("An error occured! " + err);
    });

// The querySelector() method returns the first element that matches a specified CSS selector(s) in the document.
  var video = document.querySelector("#video");
  var canvas = document.querySelector("#canvas");
  var ctx = canvas.getContext("video");
  var localMediaStream = document.querySelector(video.srcObject);

  function snapshot() {
  	    if (localMediaStream) {
      ctx.drawImage(video, 0, 0);
      document.querySelector('img').src = canvas.toDataURL('image/webp');
    }
  }

document.querySelector("#start-camera").onclick = function(e) {
	canvas.getContext("2d").drawImage(video, 0, 0);
	var x = canvas.toDataURL();
	console.log(x)
};

	// <!-- Output Table -->



	// <!-- Submit Form  -->



	// <!-- 	Java Code from game.js -->
	// <script src="assets/javascript/app.js">
		
</script>

</body>

</html>